---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "hephaestus_addon Resource - hephaestus"
subcategory: ""
description: |-
  Installs cluster addons via Helm or manifests.
  Supports common Kubernetes addons with pre-configured defaults for:
  cilium - CNI with kube-proxy replacementtailscale - Tailscale operator for remote accessnvidia-device-plugin - NVIDIA GPU support
  Example Usage
  
  # Install Cilium CNI
  resource "hephaestus_addon" "cilium" {
    cluster_id       = hephaestus_control_plane.primary.id
    control_plane_ip = hephaestus_control_plane.primary.node_ip
    name             = "cilium"
    version          = "1.16.4"
    
    values = jsonencode({
      kubeProxyReplacement = true
      k8sServiceHost       = "10.0.0.200"
      k8sServicePort       = 6443
      hubble = {
        enabled = true
        relay   = { enabled = true }
        ui      = { enabled = true }
      }
    })
    
    depends_on = [
      hephaestus_control_plane_member.secondary,
      hephaestus_worker.nodes
    ]
  }
  
  # Install Tailscale operator
  resource "hephaestus_addon" "tailscale" {
    cluster_id       = hephaestus_control_plane.primary.id
    control_plane_ip = hephaestus_control_plane.primary.node_ip
    name             = "tailscale-operator"
    repository       = "https://pkgs.tailscale.com/helmcharts"
    namespace        = "tailscale"
    
    values = jsonencode({
      oauth = {
        clientId     = var.tailscale_client_id
        clientSecret = var.tailscale_client_secret
      }
    })
  }
---

# hephaestus_addon (Resource)

Installs cluster addons via Helm or manifests.

Supports common Kubernetes addons with pre-configured defaults for:
- `cilium` - CNI with kube-proxy replacement
- `tailscale` - Tailscale operator for remote access
- `nvidia-device-plugin` - NVIDIA GPU support

## Example Usage

```hcl
# Install Cilium CNI
resource "hephaestus_addon" "cilium" {
  cluster_id       = hephaestus_control_plane.primary.id
  control_plane_ip = hephaestus_control_plane.primary.node_ip
  name             = "cilium"
  version          = "1.16.4"
  
  values = jsonencode({
    kubeProxyReplacement = true
    k8sServiceHost       = "10.0.0.200"
    k8sServicePort       = 6443
    hubble = {
      enabled = true
      relay   = { enabled = true }
      ui      = { enabled = true }
    }
  })
  
  depends_on = [
    hephaestus_control_plane_member.secondary,
    hephaestus_worker.nodes
  ]
}

# Install Tailscale operator
resource "hephaestus_addon" "tailscale" {
  cluster_id       = hephaestus_control_plane.primary.id
  control_plane_ip = hephaestus_control_plane.primary.node_ip
  name             = "tailscale-operator"
  repository       = "https://pkgs.tailscale.com/helmcharts"
  namespace        = "tailscale"
  
  values = jsonencode({
    oauth = {
      clientId     = var.tailscale_client_id
      clientSecret = var.tailscale_client_secret
    }
  })
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) ID of the hephaestus_control_plane resource
- `control_plane_ip` (String) IP address of a control plane node for Helm operations
- `name` (String) Addon/release name

### Optional

- `namespace` (String) Target namespace. Default: `kube-system`
- `repository` (String) Helm repository URL. Required for non-builtin charts.
- `timeout` (String) Timeout for installation. Default: `15m`
- `type` (String) Installation type: `helm` or `manifest`. Default: `helm`
- `values` (String) Helm values as JSON string. Use `jsonencode()` to generate.
- `version` (String) Chart version (for helm type)
- `wait` (Boolean) Wait for resources to be ready. Default: `true`

### Read-Only

- `id` (String) Resource identifier
- `installed_version` (String) Actually installed version
- `status` (String) Deployment status
