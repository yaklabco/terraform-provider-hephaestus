---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "hephaestus_worker Resource - hephaestus"
subcategory: ""
description: |-
  Joins a worker node to an existing Kubernetes cluster.
  This resource uses the join material from hephaestus_control_plane to join worker nodes.
  Worker nodes only require the join token and CA hash (not the certificate key).
  Example Usage
  
  resource "hephaestus_worker" "nodes" {
    for_each = {
      "k8s-worker-1" = { ip = "10.0.0.204", gpu = false }
      "k8s-worker-2" = { ip = "10.0.0.205", gpu = false }
      "k8s-gpu-1"    = { ip = "10.0.0.206", gpu = true }
    }
    
    node_id       = hephaestus_node.workers[each.key].id
    node_ip       = each.value.ip
    node_name     = each.key
    cluster_id    = hephaestus_control_plane.primary.id
    join_endpoint = hephaestus_control_plane.primary.api_endpoint
    join_token    = hephaestus_control_plane.primary.join_token
    ca_cert_hash  = hephaestus_control_plane.primary.ca_cert_hash
    
    labels = each.value.gpu ? {
      "nvidia.com/gpu"                        = "true"
      "node-role.kubernetes.io/gpu-worker"    = ""
    } : {
      "node-role.kubernetes.io/worker"        = ""
    }
  }
---

# hephaestus_worker (Resource)

Joins a worker node to an existing Kubernetes cluster.

This resource uses the join material from `hephaestus_control_plane` to join worker nodes.
Worker nodes only require the join token and CA hash (not the certificate key).

## Example Usage

```hcl
resource "hephaestus_worker" "nodes" {
  for_each = {
    "k8s-worker-1" = { ip = "10.0.0.204", gpu = false }
    "k8s-worker-2" = { ip = "10.0.0.205", gpu = false }
    "k8s-gpu-1"    = { ip = "10.0.0.206", gpu = true }
  }
  
  node_id       = hephaestus_node.workers[each.key].id
  node_ip       = each.value.ip
  node_name     = each.key
  cluster_id    = hephaestus_control_plane.primary.id
  join_endpoint = hephaestus_control_plane.primary.api_endpoint
  join_token    = hephaestus_control_plane.primary.join_token
  ca_cert_hash  = hephaestus_control_plane.primary.ca_cert_hash
  
  labels = each.value.gpu ? {
    "nvidia.com/gpu"                        = "true"
    "node-role.kubernetes.io/gpu-worker"    = ""
  } : {
    "node-role.kubernetes.io/worker"        = ""
  }
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ca_cert_hash` (String, Sensitive) CA certificate hash (from control_plane.ca_cert_hash)
- `cluster_id` (String) ID of the hephaestus_control_plane resource
- `join_endpoint` (String) API endpoint to join (from control_plane.api_endpoint)
- `join_token` (String, Sensitive) Join token (from control_plane.join_token)
- `node_id` (String) ID of the hephaestus_node resource
- `node_ip` (String) IP address of the node
- `node_name` (String) Hostname of the node

### Optional

- `labels` (Map of String) Labels to apply to the node after joining

### Read-Only

- `id` (String) Resource identifier
- `joined_at` (String) Timestamp when the node joined the cluster
- `status` (String) Current node status (Ready/NotReady)
